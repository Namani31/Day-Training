<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>369 Game</title>
</head>
<!-- 369 게임 조건
        1. 369게임을 Javascript로 만들 것
    2. 사람은 4명, 각 사람의 이름은 cheol, yeong, man, suk 이다.
    3. 사람은 배열로 만들 것
    4. 시작 숫자는 1이고, 한 사람 당 3개의 숫자를 말한다. (예: cheol: 1,2,3 yeong:4,5,6...)
    5. 사용자는 prompt를 이용하여 숫자를 입력한다. 
    6.그 해당 숫자에 도달할 때까지 총 박수를 몇 번 쳤는지 + 누가 마지막에 박수를 쳤는지 출력한다. 
    7. 숫자에 3, 6, 9가 포함된 개수를 세서, 그 개수만큼 박수를 친다. 예를 들어, 숫자가 33이면 박수를 두 번 치게 된다.
-->

<body>
    <script>
        // 사람 이름 배열
        const people = ["cheol", "yeong", "man", "suk"];

        // 박수 횟수와 마지막으로 박수 친 사람
        let clapCount = 0;
        let lastClapPerson = "";

        // 게임 시작 숫자 입력
        let number = parseInt(prompt("Enter the start number:"));

        if (isNaN(number) || number < 1) {
            alert("Invalid start number. Please refresh and enter a valid number.");
        } else {
            let personIndex = 0;

            while (number <= 1500) { // 게임 종료 조건: 1500번까지
                const currentPerson = people[personIndex];
                console.log(`${currentPerson}'s turn:`);

                console.log(`Number: ${number}`);

                // 숫자에 포함된 3, 6, 9 개수 확인
                const countClaps = (number.toString().match(/[369]/g) || []).length;

                if (countClaps > 0) {
                    for (let j = 0; j < countClaps; j++) {
                        console.log("Clap!");
                    }
                    clapCount += countClaps;
                    lastClapPerson = currentPerson;
                }

                number++;
                personIndex = (personIndex + 1) % people.length;
            }

            console.log(`Game over! Total claps: ${clapCount}`);
            console.log(`Last clap by: ${lastClapPerson}`);
            alert(`Game over! Total claps: ${clapCount}. Last clap by: ${lastClapPerson}.`);
        }
    </script>
</body>

</html>